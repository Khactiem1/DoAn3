@model TKSR.Models.ClassModels
@{
    ViewBag.Title = Model.user.tenTK;
    Layout = "~/Views/Shared/_LayoutLogOn.cshtml";
}

<nav class="oriented">
    <div class="grid wide">
        <ul class="oriented__list">
            <li class="oriented-item">
                <a href="@Request.Url.Scheme://@Request.Url.Authority" class="oriented-item oriented-item__link">Trang chủ</a>
            </li>
            <li class="oriented-item">Thông tin ví</li>
        </ul>
    </div>
</nav>
<section class="info">
    <div class="grid wide info__container">
        <div class="side__bar">
            <div class="side__bar-content">
                <div class="side__bar-item">
                    <h3 class="bar__title">
                        Tuỳ chỉnh
                    </h3>
                    <ul class="bar__list">
                        <li class="bar__list-item">
                            <a href="@Request.Url.Scheme://@Request.Url.Authority/User/Index" class="bar__list-text @ViewBag.Index">
                                <span>
                                    Thông tin ví
                                </span>
                            </a>
                        </li>
                        <li class="bar__list-item">
                            <a href="" class="bar__list-text">
                                <span>
                                    Biến động số dư
                                </span>
                            </a>
                        </li>
                        <li class="bar__list-item">
                            <a href="@Request.Url.Scheme://@Request.Url.Authority/Home/Logout" class="bar__list-text">
                                <span>
                                    Đăng xuất
                                </span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="info__bug">
            <div class="form">
                <h3 class="bar__title title__info">
                    Thông tin tài khoản
                </h3>
                <div class="form__container">
                    <div class="form__info">
                        <ul class="table__category">
                            <li class="table__category-item">
                                <span>Tên đăng nhập:</span>
                            </li>
                            <li class="table__category-item">
                                <span>Số dư ví:</span>
                            </li>
                            <li class="table__category-item">
                                <span>Email:</span>
                            </li>
                            <li class="table__category-item">
                                <span>Ngày tham gia:</span>
                            </li>
                            <li class="table__category-item">
                                <span>Số Mobile:</span>
                            </li>
                            <li class="table__category-item">
                                <span>Mật khẩu cũ:</span>
                            </li>
                            <li class="table__category-item">
                                <span>Mật khẩu mới:</span>
                            </li>
                            <li class="table__category-item">
                                <span>Nhập lại mật khẩu:</span>
                            </li>
                            <li class="table__category-item">
                                <span>Mật khẩu cấp 2 cũ:</span>
                            </li>
                            <li class="table__category-item">
                                <span>Mật khẩu cấp 2 mới:</span>
                            </li>
                            <li class="table__category-item">
                                <span>Nhập lại mật khẩu cấp 2 mới:</span>
                            </li>
                        </ul>
                        <ul class="table__category">
                            <li class="table__category-item">
                                <span>@Model.user.tenTK</span>
                            </li>
                            <li class="table__category-item">
                                <span>@String.Format("{0:#,##0.##}", Model.user.SoDu) VNĐ</span>
                            </li>
                            <li class="table__category-item">
                                <span>@Model.user.Email</span>
                            </li>
                            <li class="table__category-item">
                                <span>@Model.user.ngayLap.ToString("dd/MM/yyyy HH:mm:ss")</span>
                            </li>
                            <li class="table__category-item table__Update">
                                @{
                                    if (Model.user.sdt == "Chưa cập nhật")
                                    {
                                        <input value="" maxlength="20" type="text" class="change" placeholder="Nhập số điện thoại">
                                    }
                                    else
                                    {
                                        <input value="@Model.user.sdt" maxlength="20" type="text" class="change" placeholder="Nhập số điện thoại">
                                    }
                                }
                                <span class="none">Nhập đúng số điện thoại</span>
                            </li>
                            <li class="table__category-item table__Update">
                                <svg class="PasswordField_iconButton__1LFBr view__active" width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M6.629 12.957c.346.056.692.112 1.067.112h.517c3.579 0 5.812-2.426 7.181-4.251a1.128 1.128 0 0 0 0-1.357 12.035 12.035 0 0 0-1.662-1.784L11.25 8.222l.002.019c0 1.866-1.476 3.379-3.297 3.379l-.018-.003-1.308 1.339zm3.619-7.138l-1.17 1.199a1.613 1.613 0 0 0-1.124-.466c-.909 0-1.649.758-1.649 1.69 0 .447.178.849.456 1.151l-1.17 1.199a3.405 3.405 0 0 1-.935-2.35c0-1.866 1.476-3.379 3.297-3.379.893 0 1.701.367 2.294.957zm5.231-3.995c.184-.188.184-.494 0-.683s-.482-.188-.666 0l-3.056 3.132a7.743 7.743 0 0 0-3.543-.859h-.517c-2.804 0-5.219 1.324-7.181 3.938a1.098 1.098 0 0 0 0 1.372c.115.154.246.316.373.476v.007h.005c.81 1.019 1.874 2.121 3.229 2.891l-2.027 2.078a.492.492 0 0 0 0 .683.462.462 0 0 0 .667 0l2.269-2.325.011.004 1.323-1.355-.011-.005 1.282-1.313a.05.05 0 0 1 .012.002l1.895-1.942-.003-.013 1.281-1.313.005.011 1.789-1.834-.008-.007 2.874-2.946z"></path></svg>
                                <svg class="PasswordField_iconButton__1LFBr" width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M11.448 8A3.449 3.449 0 1 1 4.55 8a3.449 3.449 0 0 1 6.898 0zm4.333-.796c-2.108-2.742-4.635-4.131-7.511-4.131h-.541c-2.932 0-5.46 1.352-7.511 4.019-.29.394-.29 1.009 0 1.401.121.157.257.322.391.486v.007h.005c1.482 1.82 3.744 3.942 7.115 3.942h.541c3.744 0 6.079-2.477 7.511-4.339a1.201 1.201 0 0 0 0-1.385z"></path><path fill="currentColor" d="M9.724 8c0-.951-.774-1.725-1.725-1.725S6.275 7.049 6.275 8c0 .951.773 1.725 1.724 1.725S9.724 8.951 9.724 8z"></path></svg>
                                <input maxlength="20" type="password" class="change" placeholder="Nhập mật khẩu cũ">
                                <span class="none">Mật khẩu sai</span>
                            </li>
                            <li class="table__category-item table__Update">
                                <svg class="PasswordField_iconButton__1LFBr view__active" width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M6.629 12.957c.346.056.692.112 1.067.112h.517c3.579 0 5.812-2.426 7.181-4.251a1.128 1.128 0 0 0 0-1.357 12.035 12.035 0 0 0-1.662-1.784L11.25 8.222l.002.019c0 1.866-1.476 3.379-3.297 3.379l-.018-.003-1.308 1.339zm3.619-7.138l-1.17 1.199a1.613 1.613 0 0 0-1.124-.466c-.909 0-1.649.758-1.649 1.69 0 .447.178.849.456 1.151l-1.17 1.199a3.405 3.405 0 0 1-.935-2.35c0-1.866 1.476-3.379 3.297-3.379.893 0 1.701.367 2.294.957zm5.231-3.995c.184-.188.184-.494 0-.683s-.482-.188-.666 0l-3.056 3.132a7.743 7.743 0 0 0-3.543-.859h-.517c-2.804 0-5.219 1.324-7.181 3.938a1.098 1.098 0 0 0 0 1.372c.115.154.246.316.373.476v.007h.005c.81 1.019 1.874 2.121 3.229 2.891l-2.027 2.078a.492.492 0 0 0 0 .683.462.462 0 0 0 .667 0l2.269-2.325.011.004 1.323-1.355-.011-.005 1.282-1.313a.05.05 0 0 1 .012.002l1.895-1.942-.003-.013 1.281-1.313.005.011 1.789-1.834-.008-.007 2.874-2.946z"></path></svg>
                                <svg class="PasswordField_iconButton__1LFBr" width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M11.448 8A3.449 3.449 0 1 1 4.55 8a3.449 3.449 0 0 1 6.898 0zm4.333-.796c-2.108-2.742-4.635-4.131-7.511-4.131h-.541c-2.932 0-5.46 1.352-7.511 4.019-.29.394-.29 1.009 0 1.401.121.157.257.322.391.486v.007h.005c1.482 1.82 3.744 3.942 7.115 3.942h.541c3.744 0 6.079-2.477 7.511-4.339a1.201 1.201 0 0 0 0-1.385z"></path><path fill="currentColor" d="M9.724 8c0-.951-.774-1.725-1.725-1.725S6.275 7.049 6.275 8c0 .951.773 1.725 1.724 1.725S9.724 8.951 9.724 8z"></path></svg>
                                <input maxlength="20" type="password" class="change" placeholder="Nhập mật khẩu mới">
                                <span class="none">Cần có chữ hoa, thường ,số</span>
                            </li>
                            <li class="table__category-item table__Update">
                                <svg class="PasswordField_iconButton__1LFBr view__active" width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M6.629 12.957c.346.056.692.112 1.067.112h.517c3.579 0 5.812-2.426 7.181-4.251a1.128 1.128 0 0 0 0-1.357 12.035 12.035 0 0 0-1.662-1.784L11.25 8.222l.002.019c0 1.866-1.476 3.379-3.297 3.379l-.018-.003-1.308 1.339zm3.619-7.138l-1.17 1.199a1.613 1.613 0 0 0-1.124-.466c-.909 0-1.649.758-1.649 1.69 0 .447.178.849.456 1.151l-1.17 1.199a3.405 3.405 0 0 1-.935-2.35c0-1.866 1.476-3.379 3.297-3.379.893 0 1.701.367 2.294.957zm5.231-3.995c.184-.188.184-.494 0-.683s-.482-.188-.666 0l-3.056 3.132a7.743 7.743 0 0 0-3.543-.859h-.517c-2.804 0-5.219 1.324-7.181 3.938a1.098 1.098 0 0 0 0 1.372c.115.154.246.316.373.476v.007h.005c.81 1.019 1.874 2.121 3.229 2.891l-2.027 2.078a.492.492 0 0 0 0 .683.462.462 0 0 0 .667 0l2.269-2.325.011.004 1.323-1.355-.011-.005 1.282-1.313a.05.05 0 0 1 .012.002l1.895-1.942-.003-.013 1.281-1.313.005.011 1.789-1.834-.008-.007 2.874-2.946z"></path></svg>
                                <svg class="PasswordField_iconButton__1LFBr" width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M11.448 8A3.449 3.449 0 1 1 4.55 8a3.449 3.449 0 0 1 6.898 0zm4.333-.796c-2.108-2.742-4.635-4.131-7.511-4.131h-.541c-2.932 0-5.46 1.352-7.511 4.019-.29.394-.29 1.009 0 1.401.121.157.257.322.391.486v.007h.005c1.482 1.82 3.744 3.942 7.115 3.942h.541c3.744 0 6.079-2.477 7.511-4.339a1.201 1.201 0 0 0 0-1.385z"></path><path fill="currentColor" d="M9.724 8c0-.951-.774-1.725-1.725-1.725S6.275 7.049 6.275 8c0 .951.773 1.725 1.724 1.725S9.724 8.951 9.724 8z"></path></svg>
                                <input maxlength="20" type="password" class="change" placeholder="Nhập lại mật khẩu mới">
                                <span class="none">Mật khẩu không khớp</span>
                            </li>
                            <li class="table__category-item table__Update">
                                <svg class="PasswordField_iconButton__1LFBr view__active" width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M6.629 12.957c.346.056.692.112 1.067.112h.517c3.579 0 5.812-2.426 7.181-4.251a1.128 1.128 0 0 0 0-1.357 12.035 12.035 0 0 0-1.662-1.784L11.25 8.222l.002.019c0 1.866-1.476 3.379-3.297 3.379l-.018-.003-1.308 1.339zm3.619-7.138l-1.17 1.199a1.613 1.613 0 0 0-1.124-.466c-.909 0-1.649.758-1.649 1.69 0 .447.178.849.456 1.151l-1.17 1.199a3.405 3.405 0 0 1-.935-2.35c0-1.866 1.476-3.379 3.297-3.379.893 0 1.701.367 2.294.957zm5.231-3.995c.184-.188.184-.494 0-.683s-.482-.188-.666 0l-3.056 3.132a7.743 7.743 0 0 0-3.543-.859h-.517c-2.804 0-5.219 1.324-7.181 3.938a1.098 1.098 0 0 0 0 1.372c.115.154.246.316.373.476v.007h.005c.81 1.019 1.874 2.121 3.229 2.891l-2.027 2.078a.492.492 0 0 0 0 .683.462.462 0 0 0 .667 0l2.269-2.325.011.004 1.323-1.355-.011-.005 1.282-1.313a.05.05 0 0 1 .012.002l1.895-1.942-.003-.013 1.281-1.313.005.011 1.789-1.834-.008-.007 2.874-2.946z"></path></svg>
                                <svg class="PasswordField_iconButton__1LFBr" width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M11.448 8A3.449 3.449 0 1 1 4.55 8a3.449 3.449 0 0 1 6.898 0zm4.333-.796c-2.108-2.742-4.635-4.131-7.511-4.131h-.541c-2.932 0-5.46 1.352-7.511 4.019-.29.394-.29 1.009 0 1.401.121.157.257.322.391.486v.007h.005c1.482 1.82 3.744 3.942 7.115 3.942h.541c3.744 0 6.079-2.477 7.511-4.339a1.201 1.201 0 0 0 0-1.385z"></path><path fill="currentColor" d="M9.724 8c0-.951-.774-1.725-1.725-1.725S6.275 7.049 6.275 8c0 .951.773 1.725 1.724 1.725S9.724 8.951 9.724 8z"></path></svg>
                                <input maxlength="20" type="password" class="change" placeholder="Nhập mật khẩu 2 cũ">
                                <span class="none">Mật khẩu sai</span>
                            </li>
                            <li class="table__category-item table__Update">
                                <svg class="PasswordField_iconButton__1LFBr view__active" width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M6.629 12.957c.346.056.692.112 1.067.112h.517c3.579 0 5.812-2.426 7.181-4.251a1.128 1.128 0 0 0 0-1.357 12.035 12.035 0 0 0-1.662-1.784L11.25 8.222l.002.019c0 1.866-1.476 3.379-3.297 3.379l-.018-.003-1.308 1.339zm3.619-7.138l-1.17 1.199a1.613 1.613 0 0 0-1.124-.466c-.909 0-1.649.758-1.649 1.69 0 .447.178.849.456 1.151l-1.17 1.199a3.405 3.405 0 0 1-.935-2.35c0-1.866 1.476-3.379 3.297-3.379.893 0 1.701.367 2.294.957zm5.231-3.995c.184-.188.184-.494 0-.683s-.482-.188-.666 0l-3.056 3.132a7.743 7.743 0 0 0-3.543-.859h-.517c-2.804 0-5.219 1.324-7.181 3.938a1.098 1.098 0 0 0 0 1.372c.115.154.246.316.373.476v.007h.005c.81 1.019 1.874 2.121 3.229 2.891l-2.027 2.078a.492.492 0 0 0 0 .683.462.462 0 0 0 .667 0l2.269-2.325.011.004 1.323-1.355-.011-.005 1.282-1.313a.05.05 0 0 1 .012.002l1.895-1.942-.003-.013 1.281-1.313.005.011 1.789-1.834-.008-.007 2.874-2.946z"></path></svg>
                                <svg class="PasswordField_iconButton__1LFBr" width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M11.448 8A3.449 3.449 0 1 1 4.55 8a3.449 3.449 0 0 1 6.898 0zm4.333-.796c-2.108-2.742-4.635-4.131-7.511-4.131h-.541c-2.932 0-5.46 1.352-7.511 4.019-.29.394-.29 1.009 0 1.401.121.157.257.322.391.486v.007h.005c1.482 1.82 3.744 3.942 7.115 3.942h.541c3.744 0 6.079-2.477 7.511-4.339a1.201 1.201 0 0 0 0-1.385z"></path><path fill="currentColor" d="M9.724 8c0-.951-.774-1.725-1.725-1.725S6.275 7.049 6.275 8c0 .951.773 1.725 1.724 1.725S9.724 8.951 9.724 8z"></path></svg>
                                <input maxlength="20" type="password" class="change" placeholder="Nhập mật khẩu 2 mới">
                                <span class="none">Cần có chữ hoa, thường, số</span>
                            </li>
                            <li class="table__category-item table__Update">
                                <svg class="PasswordField_iconButton__1LFBr view__active" width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M6.629 12.957c.346.056.692.112 1.067.112h.517c3.579 0 5.812-2.426 7.181-4.251a1.128 1.128 0 0 0 0-1.357 12.035 12.035 0 0 0-1.662-1.784L11.25 8.222l.002.019c0 1.866-1.476 3.379-3.297 3.379l-.018-.003-1.308 1.339zm3.619-7.138l-1.17 1.199a1.613 1.613 0 0 0-1.124-.466c-.909 0-1.649.758-1.649 1.69 0 .447.178.849.456 1.151l-1.17 1.199a3.405 3.405 0 0 1-.935-2.35c0-1.866 1.476-3.379 3.297-3.379.893 0 1.701.367 2.294.957zm5.231-3.995c.184-.188.184-.494 0-.683s-.482-.188-.666 0l-3.056 3.132a7.743 7.743 0 0 0-3.543-.859h-.517c-2.804 0-5.219 1.324-7.181 3.938a1.098 1.098 0 0 0 0 1.372c.115.154.246.316.373.476v.007h.005c.81 1.019 1.874 2.121 3.229 2.891l-2.027 2.078a.492.492 0 0 0 0 .683.462.462 0 0 0 .667 0l2.269-2.325.011.004 1.323-1.355-.011-.005 1.282-1.313a.05.05 0 0 1 .012.002l1.895-1.942-.003-.013 1.281-1.313.005.011 1.789-1.834-.008-.007 2.874-2.946z"></path></svg>
                                <svg class="PasswordField_iconButton__1LFBr" width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M11.448 8A3.449 3.449 0 1 1 4.55 8a3.449 3.449 0 0 1 6.898 0zm4.333-.796c-2.108-2.742-4.635-4.131-7.511-4.131h-.541c-2.932 0-5.46 1.352-7.511 4.019-.29.394-.29 1.009 0 1.401.121.157.257.322.391.486v.007h.005c1.482 1.82 3.744 3.942 7.115 3.942h.541c3.744 0 6.079-2.477 7.511-4.339a1.201 1.201 0 0 0 0-1.385z"></path><path fill="currentColor" d="M9.724 8c0-.951-.774-1.725-1.725-1.725S6.275 7.049 6.275 8c0 .951.773 1.725 1.724 1.725S9.724 8.951 9.724 8z"></path></svg>
                                <input maxlength="20" type="password" class="change" placeholder="Nhập lại mật khẩu 2 mới">
                                <span class="none">Mật khẩu không khớp</span>
                            </li>
                        </ul>
                    </div>
                    <div class="confirm__change">
                        <a class="confirm">Cập nhật</a>
                    </div>
                </div>
            </div>
            <div class="waning">
                <i>
                    * Để đảm bảo an toàn cho tài khoản khách hàng.Khách hàng chú ý tuyệt đối không cung cấp mật khẩu cho bất kỳ ai kể cả admin
                </i>
            </div>
        </div>
    </div>
</section>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const view__pass = document.querySelectorAll('.PasswordField_iconButton__1LFBr');
        view__pass.forEach((items, index) => {
            if (index % 2 == 0) {
                view__pass[index].onclick = function () {
                    const element__parent = view__pass[index].parentElement.querySelector('.change');
                    view__pass[index].classList.remove('view__active');
                    view__pass[index + 1].classList.add('view__active');
                    element__parent.type = "text";
                }
            }
            else {
                view__pass[index].onclick = function () {
                    const element__parent = view__pass[index].parentElement.querySelector('.change');
                    view__pass[index].classList.remove('view__active');
                    view__pass[index - 1].classList.add('view__active');
                    element__parent.type = "password";
                }
            }
        })
        function remove_oninput(element) {
            var message = element.querySelector('span');
            message.classList.add('none');
        }
        function add__blur(element) {
            var message = element.querySelector('span');
            message.classList.remove('none');
        }
        function CheckPass1(element, event) {
            $.ajax({
                url: "/User/GetCheckPass1?id=" + element.value,
                method: "GET",
                data: "",
                contentType: "application/json",
                dataType: ""
            }).done(function (response) {
                event(response)
            }).fail(function (response) {
                active__messageNotification('Có lỗi xảy ra, thử lại sau', false);
            })
        }
        function CheckPass2(element, event) {
            $.ajax({
                url: "/User/GetCheckPass2?id=" + element.value,
                method: "GET",
                data: "",
                contentType: "application/json",
                dataType: ""
            }).done(function (response) {
                event(response)
            }).fail(function (response) {
                active__messageNotification('Có lỗi xảy ra, thử lại sau', false);
            })
        }
        function CheckSecurity(element, event) {
            $.ajax({
                url: "/User/GetCheckSecurity?id=" + element.value,
                method: "GET",
                data: "",
                contentType: "application/json",
                dataType: ""
            }).done(function (response) {
                event(response)
            }).fail(function (response) {
                active__messageNotification('Có lỗi xảy ra, thử lại sau', false);
            })
        }
        const input = document.querySelectorAll('.change');
        input.forEach((blurs, index) => {
            blurs.onblur = function () {
                if (index == 0) {
                    function tests() {
                        return sdt(input[0].value) ? undefined : `gg`;
                    }
                    if (tests() == null) {
                    }
                    else {
                        add__blur(input[0].parentElement);
                    }
                }
                else if (index == 1) {
                    function tests() {
                        return input[1].value.length > 0 ? undefined : `gg`;
                    }
                    if (tests() == null) {
                        CheckPass1(input[1], function (res) {
                            if (res == false || res == "False") {
                                add__blur(input[1].parentElement);
                            }
                        });
                    }
                    else {
                        add__blur(input[1].parentElement);
                    }
                }
                else if (index == 2) {
                    function tests() {
                        return input[2].value.length >= 6 ? undefined : `gg`;
                    }
                    if (tests() == null) {
                        CheckSecurity(input[2], function (res) {
                            if (res == false || res == "False") {
                                add__blur(input[2].parentElement);
                            }
                            if (input[3].value != input[2].value && input[3].value.length != 0) {
                                add__blur(input[3].parentElement);
                            }
                        });
                    }
                    else {
                        add__blur(input[2].parentElement);
                    }
                }
                else if (index == 3) {
                    function tests() {
                        return input[3].value == input[2].value ? undefined : `gg`;
                    }
                    if (tests() == null) {
                    }
                    else {
                        add__blur(input[3].parentElement);
                    }
                }
                else if (index == 4) {
                    function tests() {
                        return input[4].value.length > 0 ? undefined : `gg`;
                    }
                    if (tests() == null) {
                        CheckPass2(input[4], function (res) {
                            if (res == false || res == "False") {
                                add__blur(input[4].parentElement);
                            }
                        });
                    }
                    else {
                        add__blur(input[4].parentElement);
                    }
                }
                else if (index == 5) {
                    function tests() {
                        return input[5].value.length >= 6 ? undefined : `gg`;
                    }
                    if (tests() == null) {
                        CheckSecurity(input[5], function (res) {
                            if (res == false || res == "False") {
                                add__blur(input[5].parentElement);
                            }
                            if (input[6].value != input[5].value && input[6].value.length != 0) {
                                add__blur(input[6].parentElement);
                            }
                        });
                    }
                    else {
                        add__blur(input[5].parentElement);
                    }
                }
                else if (index == 6) {
                    function tests() {
                        return input[6].value == input[5].value ? undefined : `gg`;
                    }
                    if (tests() == null) {
                    }
                    else {
                        add__blur(input[6].parentElement);
                    }
                }
            }
            blurs.oninput = function () {
                if (index == 0) {
                    remove_oninput(input[0].parentElement);
                }
                if (index == 1) {
                    remove_oninput(input[1].parentElement);
                }
                if (index == 2) {
                    remove_oninput(input[2].parentElement);
                    if (input[2].value == input[3].value) {
                        remove_oninput(input[3].parentElement);
                    }
                }
                if (index == 3) {
                    remove_oninput(input[3].parentElement);
                }
                if (index == 4) {
                    remove_oninput(input[4].parentElement);
                }
                if (index == 5) {
                    remove_oninput(input[5].parentElement);
                    if (input[5].value == input[6].value) {
                        remove_oninput(input[6].parentElement);
                    }
                }
                if (index == 6) {
                    remove_oninput(input[6].parentElement);
                }
            }
        })
        var time = 200;
        const btnUpdate = document.querySelector('.confirm');
        btnUpdate.onclick = function () {
            if (input[1].value == "" && input[4].value == "" && input[0].value == "") {
                add__blur(input[0].parentElement);
                add__blur(input[1].parentElement);
                add__blur(input[4].parentElement);
            }
            else if (input[1].value == "" && input[4].value == "") {
                upDateSDT()
            }
            else if (input[0].value == "" && input[4].value == "") {
                upDatePass1()
            }
            else if (input[0].value == "" && input[1].value == "") {
                upDatePass2()
            }
            else if (input[0].value == "") {
                if (input[2].value != input[5].value) {
                    upDatePass1();
                    setTimeout(function () {
                        upDatePass2();
                    }, time)
                }
                else {
                    active__messageNotification('Mật khẩu đăng nhập và mật khẩu cấp 2 không được trùng nhau', false);
                }
            }
            else if (input[1].value == "") {
                upDateSDT();
                setTimeout(function () {
                    upDatePass2();
                }, time)
            }
            else if (input[4].value == "") {
                upDateSDT();
                setTimeout(function () {
                    upDatePass1();
                }, time)
            }
            else if (input[1].value != "" && input[4].value != "" && input[0].value != "") {
                upDateSDT();
                if (input[2].value != input[5].value) {
                    setTimeout(function () {
                        upDatePass1();
                    }, time)
                    setTimeout(function () {
                        upDatePass2();
                    }, time * 2)
                }
                else {
                    active__messageNotification('Mật khẩu đăng nhập và mật khẩu cấp 2 không được trùng nhau', false);
                }
            }
        }
        function upDateSDT() {
            function tests() {
                return sdt(input[0].value) ? undefined : `gg`;
            }
            if (tests() == null) {
                active__Loading(true);
                $.ajax({
                    url: "/User/PostEditSDT?id=" + input[0].value,
                    method: "POST",
                    data: "",
                    contentType: "application/json",
                    dataType: ""
                }).done(function (response) {
                    active__Loading(false);
                    if (response == true || response == "True") {
                        active__messageNotification('Đã thay đổi SDT', true);
                    }
                }).fail(function (response) {
                    active__Loading(false);
                    active__messageNotification('Có lỗi xảy ra, thử lại sau', false);
                })
            }
            else {
                add__blur(input[0].parentElement);
            }
        }
        function upDatePass1() {
            function tests() {
                return input[1].value.length > 0 ? undefined : `gg`;
            }
            if (tests() == null) {
                CheckPass1(input[1], function (res) {
                    if (res == false || res == "False") {
                        add__blur(input[1].parentElement);
                    }
                    else if (res == true || res == "True") {
                        function tests() {
                            return input[2].value.length >= 6 ? undefined : `gg`;
                        }
                        if (tests() == null) {
                            CheckSecurity(input[2], function (res) {
                                if (res == false || res == "False") {
                                    add__blur(input[2].parentElement);
                                }
                                else if (res == true || res == "True") {
                                    function tests() {
                                        return input[3].value == input[2].value ? undefined : `gg`;
                                    }
                                    if (tests() == null) {
                                        if (input[2].value != input[5].value) {
                                            active__Loading(true);
                                            var form = new FormData();
                                            form.append("pass", input[1].value)
                                            form.append("newPass", input[2].value)
                                            var xhr = new XMLHttpRequest();
                                            xhr.open("POST", '/User/PostEditPass1', true);
                                            xhr.onreadystatechange = function () {
                                                if (xhr.readyState == 4 && xhr.status == 200) {
                                                    active__Loading(false);
                                                    var r = xhr.responseText;
                                                    var j = JSON.parse(r);
                                                    if (j.Data.status == "OK") {
                                                        active__messageNotification('Đã thay đổi Mật khẩu', true);
                                                        input[1].value = "";
                                                        input[2].value = "";
                                                        input[3].value = "";
                                                    }
                                                    else {
                                                        active__messageNotification('Mật khẩu đăng nhập và mật khẩu cấp 2 không được trùng nhau', false);
                                                    }
                                                }
                                            }
                                            xhr.send(form);
                                        }
                                    }
                                    else {
                                        add__blur(input[3].parentElement);
                                    }
                                }
                            });
                        }
                        else {
                            add__blur(input[2].parentElement);
                        }
                    }
                });
            }
            else {
                add__blur(input[1].parentElement);
            }
        }
        function upDatePass2() {
            function tests() {
                return input[4].value.length > 0 ? undefined : `gg`;
            }
            if (tests() == null) {
                CheckPass2(input[4], function (res) {
                    if (res == false || res == "False") {
                        add__blur(input[4].parentElement);
                    }
                    else if (res == true || res == "True") {
                        function tests() {
                            return input[5].value.length >= 6 ? undefined : `gg`;
                        }
                        if (tests() == null) {
                            CheckSecurity(input[5], function (res) {
                                if (res == false || res == "False") {
                                    add__blur(input[5].parentElement);
                                }
                                else if (res == true || res == "True") {
                                    function tests() {
                                        return input[6].value == input[5].value ? undefined : `gg`;
                                    }
                                    if (tests() == null) {
                                        if (input[2].value != input[5].value) {
                                            active__Loading(true);
                                            var form = new FormData();
                                            form.append("pass", input[4].value)
                                            form.append("newPass", input[5].value)
                                            var xhr = new XMLHttpRequest();
                                            xhr.open("POST", '/User/PostEditPass2', true);
                                            xhr.onreadystatechange = function () {
                                                if (xhr.readyState == 4 && xhr.status == 200) {
                                                    active__Loading(false);
                                                    var r = xhr.responseText;
                                                    var j = JSON.parse(r);
                                                    if (j.Data.status == "OK") {
                                                        active__messageNotification('Đã thay đổi Mật khẩu 2', true);
                                                        input[4].value = "";
                                                        input[5].value = "";
                                                        input[6].value = "";
                                                    }
                                                    else {
                                                        active__messageNotification('Mật khẩu đăng nhập và mật khẩu cấp 2 không được trùng nhau', false);
                                                    }
                                                }
                                            }
                                            xhr.send(form);
                                        }
                                    }
                                    else {
                                        add__blur(input[6].parentElement);
                                    }
                                }
                            });
                        }
                        else {
                            add__blur(input[5].parentElement);
                        }
                    }
                });
            }
            else {
                add__blur(input[4].parentElement);
            }
        }
        function sdt(sdt) {
            var regex = /(03|05|07|08|09|01[2|6|8|9])+([0-9]{8})\b/;
            return regex.test(sdt);
        }
    }, false)
</script>
